<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>auis</title>
    <style>
      body {
        background-color: #090a0d;
      }
      /* Move media query to the end for better style override */
      .chat-bubble {
        background: #222a36;
        color: #fff;
        border-radius: 50px 26px 50px 50px;
        padding: 10px 16px;
        margin: 8px 0;
        max-width: 44%;
        word-break: break-word;
        box-shadow: 2px 2px 8px #fff;
        position: relative;
        font-size: 15px;
        left: 0;
      }
      .chat-bubble.user {
        background: #121319;
        color: #fff;
        margin-left: auto;
        margin-right: 0;
      }
      .chat-bubble.other {
        background: #222a36;
        color: #fff;
        margin-right: auto;
        margin-left: 0;
      }
      .div1,
      .div2,
      .div3,
      .div4 {
        background-color: #4169e1;
        height: 40px;
        width: 40px;
        border-radius: 50%;
        border: 2px solid #66cdaa;
        text-align: center;
        font-size: 8px;
        margin: 1px 0 1px 4px;
      }
      input {
        background-color: #000000;
        color: blue;
        border: 5px solid #66cdaa;
        border-radius: 8px;
        width: 40%;
        height: 31px;
        margin: 0 0 0 6px;
      }
      input:hover {
        box-shadow: 3px 3px 9px #ffffff;
      }
      .div1:hover {
        box-shadow: 4px 4px 6px #7fff00;
        color: #7fff00;
      }
      .div2:hover {
        box-shadow: 4px 4px 6px #ff4500;
        color: #ff4500;
      }
      .div3:hover {
        box-shadow: 4px 4px 6px #65c8ff;
        color: #65c8ff;
      }
      .div4:hover {
        box-shadow: 4px 4px 6px #00ff3c;
        color: #00ff3c;
      }
      .bom {
        color: #ffffff;
        margin: 0 60px 0 30px;
        width: 60%;
        height: 680px; /* 높이를 제한하여 내용이 넘치게 함 */
        position: absolute;
        top: 6%;
        left: 0;
        z-index: 1;
        overflow-y: auto;
      }
      .bom-d ::placeholder {
        color: #7cfc00;
      }
      .op {
        background-color: #121319;
        border: 1px solid #1b1d25;
        border-radius: 30px;
        width: 60%;
        height: 42px;
        margin: 20px 0px;
        position: absolute;
        top: 710px;
        padding: 10px;
      }
      .opp {
        background-color: #121319;
        border: 1px solid #1b1d25;
        border-radius: 26px;
        height: 28px;
        width: 25%;
        margin: 22px 10px 0 10px;
        position: absolute;
        top: 0px;
        text-align: center;
        z-index: 2;
        box-shadow: 0 0 30px 10px #ffffff;
      }
      .menu-a {
        color: lightskyblue;
        text-decoration: none;
        font-size: 16px;
        margin: 0 20px 0 20px;
        padding: 1px;
      }
      .menu-a:hover {
        text-align: center;
        color: #4169e1;
        font-size: 20.5px;
        transition: 0.3s;
      }

      .card {
        background: blue;
        height: 30px;
        width: 30px;
        border-radius:  0 0 10px  0;
        position: absolute;
        left: 65%;
        font-size: none;
      }
      .card .card-im_if {
        display: none;
      }
      .card .card-tage-box {
        display: none;
      }
      .card .card-box-if {
        display: none;
      }
      .card:hover {
        background: none;
        background-color: lightskyblue;
        height: 200px;
        width: 140px;
        border-radius: 7px;
        position: absolute;
        left: 65%;
        transition: 0.8s;
      }
      .card:hover .card-im_if {
        display: block;
      }
      .card:hover .card-img {
        width: 100%;
        height: 40%;
        border-radius: 7px;
      }
      .card:hover .card-title {
        position: absolute;
        top: 58px;
        left: 0px;
        background-color: #fff;
        font-size: 13px;
        width: 60%;
        height: 16px;
        padding-left: 30px;
        border-radius: 0 50px 0 0;
        display: flex;
        align-items: center;
      }
      .card:hover .card-box-if {
        display: block;
      }
      .card:hover .card-tage-box {
        display: flex;
      }
      .card-tage {
        margin: 14px 0 0 1.5px;
        font-size: 9px;
        background-color: #333;
        border-radius: 50px;
        width: 35px;
        color: #fff;
        text-align: center;
      }
      .card-in-hr {
        background-color: #333;
        height: 0.1px;
      }
      .card-mn {
        font-size: 13px;
      }
      .card-a {
        display: inline;
        color: #000;
        text-decoration: none;
        width: 100px;
        height: 100px;
        z-index: 3;
      }
      .card-a:hover .card {
        background-color: lightblue;
      }

      @media (max-width:600px) {
        .opp {
          display: inline;
          width: 92%;
          height: 25px;
        }

        .op {
          width: 92%;
        }

        .bom {
          width: 97%;
          height: 680px;
        }

        input {
          width: 40%;
        }

        .card {
          width: 240px;
          height: 25px;
          border-radius: 50px;
          margin-left: 14.3px;
          position: absolute;
          top: 90px;
          left: 0;
        }
        
        .card:hover {
          background-color: lightskyblue;
          width: 240px;
          height: 80px;
          border-radius: 50px;
          position: absolute;
          left: 0;
          transition: 0.8s;
        }
        .card:hover .card-img {
          width: 30%;
          height: 100%;
          border-radius: 50px 0 0 50px;
          position: absolute;
          left: 0;
        }
        .card:hover .card-title {
          background-color: #fff;
          font-size: 13px;
          border-radius: 0 50px 0 0;
          width: 47%;
          height: 16px;
          position: absolute;
          top: 25px;
          display: flex;
          align-items: center;
        }

        .card:hover .card-tage-box {
          display: flex;
          position: absolute;
          left: 80px;
        }
        .card-in-hr {
          background-color: #333;
          height: 1px;
          position: absolute;
          top: 1;
        }
      }
    </style>
  </head>
  <body onload="loadStoredIdea()">
    <div class="opp">
        <a class="menu-a" href="hm.html">Home</a>
        <a class="menu-a">Auis</a>
        <a class="menu-a" href="st.html">Setting</a>
      </nav>
    </div>
    <div class="card-bigBox">
    <a class="card-a" href="https://youtu.be/j2LZmDCCpKY?si=RGthDY3EFlISv5gv"><div class="card">
      <div class="hidn-div"></div>
      <div class="card-im_if">
        <img
          class="card-img"
          src="https://cdn.pixabay.com/photo/2015/04/23/22/00/tree-736885_1280.jpg"
        />
        <p class="card-title">너라는 별</p>
      </div>
      <div class="card-box-if">
        <div class="card-tage-box">
          <p class="card-tage">#발라드</p>
          <p class="card-tage">#R&B</p>
      </div>
        <hr class="card-in-hr">
        <p class="card-mn">덥고 피곤해서 고생했을 당신들에게 추천합니다.</p>
      </div>
    </div></a> 
    </div>
    <div class="bom" id="45tr"></div>
    <div class="op">
      <input
        id="youInput"
        placeholder="아이디어를 공유."
        onkeydown="if(event.key==='Enter') youC()"
      />
      <button type="button" onclick="youC()" class="div1">보내기</button>
      <button type="button" onclick="youCRemove()" class="div2">지우기</button>
      <button type="button" onclick="youLS()" class="div3">링크<br>공유</button>
      <button type="button" onclick="youLIMGS()" class="div4">사진<br>공유</button>
    </div>
    <script>
      // 아이디어 추가 및 저장
      let editIdx = null;
      function youC() {
        const text = document.getElementById('youInput').value;
        if (!text.trim()) return;
        const currentIdeas = JSON.parse(localStorage.getItem('ideas') || '[]');
        if (editIdx !== null) {
          currentIdeas[editIdx] = text;
          editIdx = null;
        } else {
          currentIdeas.push(text);
        }
        localStorage.setItem('ideas', JSON.stringify(currentIdeas));
        loadStoredIdea();
        document.getElementById('youInput').value = '';
        scrollToBottom();
      }

      function youCRemove() {
        document.getElementById('45tr').innerHTML = '';
        localStorage.removeItem('ideas');
      }

      function loadStoredIdea() {
        const savedIdea = localStorage.getItem('ideas');
        if (savedIdea) {
          const idArray = JSON.parse(savedIdea);
          document.getElementById('45tr').innerHTML = idArray
            .map(
              (item, idx) =>
                `<div class='chat-bubble user'>${item.replace(/\n/g, '<br>')}
                  <button onclick='editMsg(${idx})'>수정</button>
                  <button onclick='deleteMsg(${idx})'>삭제</button>
                </div>`
            )
            .join('');
        }
        scrollToBottom();
      }

      function scrollToBottom() {
        const chatBox = document.getElementById('45tr');
        chatBox.scrollTop = chatBox.scrollHeight;
      }

      function youLS() {
        const url = document.getElementById('youInput').value.trim();
        if (!url) return;
        const linkHTML = `<div class='chat-bubble user'><a href='${url}' target='_blank'>보기</a></div>`;
        document.getElementById('45tr').innerHTML += linkHTML;
        const currentIdeas = JSON.parse(localStorage.getItem('ideas') || '[]');
        currentIdeas.push(url);
        localStorage.setItem('ideas', JSON.stringify(currentIdeas));
        document.getElementById('youInput').value = '';
        scrollToBottom();
      }
      function youLIMGS() {
        const imgUrl = document.getElementById('youInput').value.trim();
        if (!imgUrl) return;
        const linkHTML = `<div class='chat-bubble user'><img src='${imgUrl}' target='_blank'></div>`;
        document.getElementById('45tr').innerHTML += linkHTML;
        const currentIdeas1 = JSON.parse(localStorage.getItem('ideas') || '[]');
        currentIdeas.push(imgUrl);
        localStorage.setItem('ideas', JSON.stringify(currentIdeas1));
        document.getElementById('youInput').value = '';
        scrollToBottom();
      }
      

      function deleteMsg(idx) {
        const ideas = JSON.parse(localStorage.getItem('ideas') || '[]');
        ideas.splice(idx, 1);
        localStorage.setItem('ideas', JSON.stringify(ideas));
        loadStoredIdea();
        editIdx = null;
        document.getElementById('youInput').value = '';
      }

      function editMsg(idx) {
        const ideas = JSON.parse(localStorage.getItem('ideas') || '[]');
        document.getElementById('youInput').value = ideas[idx];
        editIdx = idx;
      }
    </script>
  </body>
</html>
